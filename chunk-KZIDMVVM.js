import{Eb as d,Fb as p,P as m,V as j,a as e,b as a,ha as w,pa as b,qa as I}from"./chunk-XSRQVZZA.js";function R(n){let t=p(()=>n());return T(t)?new Proxy(n,{get(o,r){return r in t?(b(o[r])||Object.defineProperty(o,r,{value:d(()=>o()[r]),configurable:!0}),R(o[r])):o[r]}}):n}var E=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function T(n){if(n===null||typeof n!="object"||W(n))return!1;let t=Object.getPrototypeOf(n);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(E.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function W(n){return typeof n?.[Symbol.iterator]=="function"}var C=new WeakMap,c=Symbol("STATE_SOURCE");function _(n,...t){n[c].update(o=>t.reduce((r,i)=>e(e({},r),typeof i=="function"?i(r):i),o)),P(n)}function K(n){return n[c]()}function O(n){return C.get(n[c])||[]}function P(n){let t=O(n);for(let o of t){let r=p(()=>K(n));o(r)}}function z(...n){let t=[...n],o=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class s{constructor(){let f=r.reduce((u,M)=>M(u),x()),{stateSignals:l,props:v,methods:D,hooks:k}=f,h=e(e(e({},l),v),D);this[c]=f[c];for(let u of Reflect.ownKeys(h))this[u]=h[u];let{onInit:g,onDestroy:S}=k;g&&g(),S&&j(w).onDestroy(S)}static \u0275fac=function(l){return new(l||s)};static \u0275prov=m({token:s,factory:s.\u0275fac,providedIn:o.providedIn||null})}return s})()}function x(){return{[c]:I({}),stateSignals:{},props:{},methods:{},hooks:{}}}function G(n){return t=>{let o=n(e(e(e({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(o),a(e({},t),{methods:e(e({},t.methods),o)})}}function J(n){return t=>{let o=typeof n=="function"?n():n,r=Reflect.ownKeys(o);t[c].update(s=>e(e({},s),o));let i=r.reduce((s,y)=>{let f=d(()=>t[c]()[y]);return a(e({},s),{[y]:R(f)})},{});return a(e({},t),{stateSignals:e(e({},t.stateSignals),i)})}}export{_ as a,z as b,G as c,J as d};
