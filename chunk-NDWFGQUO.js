import{b as k}from"./chunk-R5ZCV5UY.js";import"./chunk-WHCJRWRQ.js";import{a as L}from"./chunk-QCXNJLJG.js";import{a as Y}from"./chunk-EGLRAQEI.js";import"./chunk-RFTYMCRL.js";import{a as N,b as j,c as G}from"./chunk-X3BUBGKZ.js";import{$a as O,Aa as i,Eb as P,Ja as v,M as E,P as T,Rb as _,Sb as w,Ua as y,V as h,Xb as R,Yb as H,Za as A,Zb as M,_a as V,ab as r,bb as a,bc as F,cb as g,cc as U,eb as f,fb as x,ma as D,na as C,nb as s,ob as o,pb as B,qa as l,xb as u,yb as p}from"./chunk-XSRQVZZA.js";var z={industry:"",values:[""]},$={genericSignalCollection:l(z)};var b=class d{http=h(L);brandIndustryStore=h(k);brandIndustry=$;brandIndustryListPath="assets/tempUsage/brand-industry.json";industryValuesListPath="assets/tempUsage/brand-values.json";industryValuesConnectionPath="assets/tempUsage/industry-values-archetype-connections.json";brandIndustryList=l({industryOptions:[]});brandIndustryValuesConnection=l({rules:[]});topThreeArchetypes={};selectedIndustryArchetype=l("");selectedValueArchetypes=l([]);combinedSelectedArchetypes=P(()=>{let e=this.selectedIndustryArchetype()?[this.selectedIndustryArchetype(),...this.selectedValueArchetypes()]:[...this.selectedValueArchetypes()];return console.log(this.calculateRoundedPercentages(e)," <--- COMBINED SELECTED ARCHETYPES IN SERVICE"),e});get industryValuesConnections(){return this.brandIndustryValuesConnection()}get completeBrandIndustryCollectionState(){return this.brandIndustryStore.brandIndustryState}updateBrandIndustryCollection(e){e.industry!==void 0&&this.brandIndustryStore.updateBrandIndustry(e.industry),e.values!==void 0&&this.brandIndustryStore.updateBrandValues(e.values)}loadBrandIndustryValueConnections(){this.http.get(this.industryValuesConnectionPath).pipe(E(e=>this.brandIndustryValuesConnection.set(e))).subscribe()}loadBrandIndustry(){return this.http.get(this.brandIndustryListPath)}loadIndustryValues(){return this.http.get(this.industryValuesListPath)}findArchetypeFromValues(e){return this.industryValuesConnections.rules.find(t=>t.condition.value?.includes(e))?.archetype}findArchetypeFromIndustry(e){return this.industryValuesConnections.rules.find(t=>t.condition.industry?.includes(e))?.archetype}calculateRoundedPercentages(e){let t=e.length,n={};e.forEach(m=>{n[m]=(n[m]||0)+1});let I={};for(let m in n)I[m]=Math.ceil(n[m]/t*100);let c=Object.entries(I).sort((m,W)=>W[1]-m[1]).slice(0,15);return this.topThreeArchetypes=Object.fromEntries(c),console.log("Top 3 Archetypes:",this.topThreeArchetypes),this.topThreeArchetypes}static \u0275fac=function(t){return new(t||d)};static \u0275prov=T({token:d,factory:d.\u0275fac,providedIn:"root"})};function Q(d,e){if(d&1&&(r(0,"option",1),s(1),a()),d&2){let t=e.$implicit,n=x();y("value",t)("selected",n.isSelected(t)),i(),o(t)}}var S=class d{options=C([]);selectionChange=D();selectedOptions=[];selectedOptionsState=C([]);onSelectionChange(e){let t=e.target;this.selectedOptions=Array.from(t.selectedOptions).map(n=>n.value),this.selectionChange.emit(this.selectedOptions),console.log(`Selected ${this.selectedOptions.length} items: ${this.selectedOptions.join(", ")}`)}isSelected(e){return this.selectedOptionsState().includes(e)}updateSelectedOptions(){let e=document.querySelector("select");e&&Array.from(e.options).forEach(t=>{t.selected=this.selectedOptionsState().includes(t.value)})}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=v({type:d,selectors:[["daden-multi-list-selection"]],inputs:{options:[1,"options"],selectedOptionsState:[1,"selectedOptionsState"]},outputs:{selectionChange:"selectionChange"},decls:4,vars:0,consts:[["multiple","",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-all","h-32",3,"change"],[3,"value","selected"]],template:function(t,n){t&1&&(r(0,"div")(1,"select",0),f("change",function(c){return n.onSelectionChange(c)}),V(2,Q,2,3,"option",1,A),a()()),t&2&&(i(2),O(n.options()))},encapsulation:2})};var J=class d{brandIndustryService=h(b);translate=h(R);groupHeaderTitleIndustry="";groupHeaderSubTitleIndustry="";combinedSelectedArchetypes=this.brandIndustryService.combinedSelectedArchetypes;groupHeaderTitleBrandname="";groupHeaderSubTitleBrandname="";industryValues=[];dropDownIndustryConfig={placeholder:"Select your industry...",items:[],selectedItem:this.brandIndustryCollectionComputed.industry,disabled:!1};industriesPlaceholder=l("Select your industry...");traitsPlaceholder=l("Select your traits...");personalityPlaceholder=l("Select your personality...");ngOnInit(){this.groupHeaderTitleIndustry=this.translate.instant("industry-and-values.preview-area.preview-title"),this.groupHeaderSubTitleIndustry=this.translate.instant("industry-and-values.preview-area.preview-description"),this.groupHeaderTitleIndustry=this.translate.instant("industry-and-values.form-area.group-title-industry"),this.groupHeaderSubTitleIndustry=this.translate.instant("industry-and-values.form-area.group-subTitle-industry"),this.brandIndustryService.loadBrandIndustry().subscribe(e=>{this.dropDownIndustryConfig.items=e.industryOptions}),this.brandIndustryService.loadIndustryValues().subscribe(e=>{this.industryValues=e.valueOptions}),this.brandIndustryService.loadBrandIndustryValueConnections()}get brandIndustryCollectionComputed(){return this.brandIndustryService.completeBrandIndustryCollectionState()}handleDropdownIndustry(e){let t=this.brandIndustryService.findArchetypeFromIndustry(e);t&&(this.brandIndustryService.selectedIndustryArchetype.set(t),console.log("TRIGGERING INDUSTRY COMPONENT WITH FOUNDARCHETYPE ---> ",t),this.brandIndustryService.updateBrandIndustryCollection({industry:e}))}handleMultipleValues(e){this.brandIndustryService.updateBrandIndustryCollection({values:e});let t=e.map(n=>this.brandIndustryService.findArchetypeFromValues(n)).filter(n=>!!n);this.brandIndustryService.selectedValueArchetypes.set(t)}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=v({type:d,selectors:[["app-brand-industry"]],decls:47,vars:32,consts:[["id","industry"],["id","industry-and-values-industry"],[3,"title","subtitle"],["id","Industry","name","Industry",3,"selectedValue","dropDownParts"],["id","value"],["id","industry-and-values-values"],[3,"selectionChange","options","selectedOptionsState"],["id","tone-of-voice-preview"],[1,"p-4","bg-blue-50","rounded-lg"],[1,"text-lg","font-medium","italic"],[1,"text-blue-700"]],template:function(t,n){t&1&&(g(0,"daden-header"),r(1,"section",0)(2,"div",1),g(3,"daden-group-header",2),r(4,"daden-label"),s(5),u(6,"translate"),a(),r(7,"daden-detail"),s(8),u(9,"translate"),a(),r(10,"daden-dropdown",3),f("selectedValue",function(c){return n.handleDropdownIndustry(c)}),a()()(),r(11,"section",4)(12,"div",5)(13,"daden-detail"),s(14),u(15,"translate"),a(),r(16,"daden-label"),s(17),u(18,"translate"),a(),r(19,"daden-detail"),s(20),u(21,"translate"),a(),r(22,"daden-multi-list-selection",6),f("selectionChange",function(c){return n.handleMultipleValues(c)}),a()()(),r(23,"section",7),g(24,"daden-group-header",2),r(25,"div",8)(26,"p",9),s(27,"\u201CA "),r(28,"span",10),s(29),a(),s(30," brand that\u2019s "),r(31,"span",10),s(32),a(),s(33," and "),r(34,"span",10),s(35),a(),s(36,", with a "),r(37,"span",10),s(38),a(),s(39," personality.\u201D "),a()()(),r(40,"div"),s(41),u(42,"json"),a(),r(43,"div"),s(44),u(45,"json"),a(),g(46,"daden-page-footer")),t&2&&(i(3),y("title",n.groupHeaderTitleIndustry)("subtitle",n.groupHeaderSubTitleIndustry),i(2),o(p(6,18,"industry-and-values.form-area.inputlabel")),i(3),o(p(9,20,"industry-and-values.form-area.description-follow")),i(2),y("dropDownParts",n.dropDownIndustryConfig),i(4),o(p(15,22,"industry-and-values.form-area.values-description")),i(3),o(p(18,24,"industry-and-values.form-area.values-label")),i(3),o(p(21,26,"industry-and-values.form-area.values-description-2")),i(2),y("options",n.industryValues)("selectedOptionsState",n.brandIndustryCollectionComputed.values),i(2),y("title",n.groupHeaderTitleBrandname)("subtitle",n.groupHeaderSubTitleBrandname),i(5),o(n.brandIndustryCollectionComputed.industry),i(3),o(n.brandIndustryCollectionComputed.values[0]),i(3),o(n.brandIndustryCollectionComputed.values[1]),i(3),o(n.brandIndustryCollectionComputed.values[2]),i(3),B("COMBINED ARCHETYPES : ",p(42,28,n.combinedSelectedArchetypes()),""),i(3),B("COMPUTED STATE IN STORE : ",p(45,30,n.brandIndustryCollectionComputed),""))},dependencies:[F,M,H,w,_,U,S,j,N,G,Y],encapsulation:2})};export{J as BrandIndustryComponent};
